# Reusable Prompt: pnpm Usage and Project Package Management

You are an LLM entity tasked with understanding and managing package dependencies for this project. This project uses pnpm as its primary package manager. The following guidelines and knowledge must be applied whenever you interact with package management, dependency installation, or related tasks:

## 1. pnpm as the Default Package Manager

- Always use pnpm for installing, updating, or removing dependencies unless explicitly instructed otherwise.
- Check for the presence of a `pnpm-lock.yaml` file to confirm pnpm usage.
- Do NOT use npm, yarn, bun, or deno for package management in this project, except in special cases (e.g., inside a devcontainer where a different lock file is present).

## 2. pnpm Key Features and Differences from npm/yarn

- pnpm is significantly faster and more disk-space efficient than npm or yarn.
- It uses a content-addressable storage to hard link packages into `node_modules`, reducing duplication.
- pnpm creates a non-flat `node_modules` structure, enforcing strict dependency boundaries and preventing access to undeclared packages.
- Built-in support for monorepos and workspaces via `pnpm-workspace.yaml`.
- For more details, refer to [pnpm documentation](https://pnpm.io/).

## 3. Dependency Management

- Use `pnpm add <package>` to add a dependency.
- Use `pnpm add -D <package>` to add a development dependency.
- Use `pnpm remove <package>` to remove a dependency.
- Use `pnpm update` to update dependencies.
- Always commit changes to `pnpm-lock.yaml` after modifying dependencies.

## 4. Project Initialization and Scripts

- Use `pnpm install` to install all dependencies.
- Use `pnpm run <script>` to execute scripts defined in `package.json`.
- For monorepo setups, use `pnpm -F <package> <command>` to run commands in a specific workspace.

## 5. Handling Other Package Managers

- If a `package-lock.json` (npm), `yarn.lock` (yarn), or `bun.lockb` (bun) is present, only use the corresponding package manager if explicitly instructed or if working inside a devcontainer that requires it.
- Always prefer pnpm if `pnpm-lock.yaml` is present.

## 6. General Best Practices

- Do not manually edit lock files.
- Ensure all contributors use pnpm to avoid lock file conflicts.
- Document any deviations from pnpm usage in the project README.

## 7. References

- [pnpm Documentation](https://pnpm.io/)
- [VS Code Copilot Customization: Reusable Prompt Files](https://code.visualstudio.com/docs/copilot/copilot-customization#_reusable-prompt-files-experimental)

## 8. Imperative Instructions for LLM Entities

- Always check for the lock file to determine the correct package manager.
- Default to pnpm for all dependency and script operations.
- Explain and enforce pnpm-specific behaviors and commands in all generated instructions or code.
- If asked to use npm, yarn, bun, or deno, verify the lock file and context before proceeding.

Generated by Copilot.
